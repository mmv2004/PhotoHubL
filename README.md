# PhotoHub - Система управления фотостудиями

Этот проект представляет собой Django-приложение для управления фотостудиями и локациями. В этой версии была переработана система работы с адресами с использованием Яндекс Карт для улучшения валидации и юзабилити.

## Инструкция по установке и запуску (Windows 11, PyCharm)

### 1. Предварительные требования

Для запуска проекта вам потребуется:
*   **Python 3.x** (рекомендуется 3.10+)
*   **PostgreSQL** (установленный и запущенный)
*   **PyCharm** (или любой другой IDE/текстовый редактор)

### 2. Настройка базы данных PostgreSQL

1.  Убедитесь, что ваш сервер PostgreSQL запущен.
2.  Создайте новую базу данных для проекта. Например, `photohub_db`.
    ```sql
    CREATE DATABASE photohub_db;
    ```
3.  Убедитесь, что у вас есть учетные данные пользователя, который может подключаться к этой базе данных (например, стандартный пользователь `postgres`).

### 3. Настройка проекта

1.  **Распакуйте архив** `photohub_final.zip` в удобное для вас место.
2.  **Создайте виртуальное окружение** (рекомендуется использовать PyCharm):
    *   Откройте проект в PyCharm.
    *   Перейдите в `File` -> `Settings` -> `Project: photohub_final` -> `Python Interpreter`.
    *   Нажмите на шестеренку, выберите `Add...` и создайте новое `Virtual Environment` (venv).
3.  **Установите зависимости**:
    *   Откройте терминал PyCharm (вкладка **Terminal** внизу).
    *   Выполните команду для установки всех необходимых библиотек:
        ```bash
        pip install -r requirements.txt
        ```
4.  **Настройте переменные окружения**:
    *   В корне проекта должен находиться файл `.env` (если его нет, создайте его).
    *   Заполните его данными для подключения к вашей базе данных PostgreSQL:
        ```env
        SECRET_KEY=ваш_секретный_ключ_для_django
        DEBUG=True
        
        # Настройки PostgreSQL
        DB_NAME=photohub_db
        DB_USER=postgres
        DB_PASSWORD=ваш_пароль
        DB_HOST=localhost
        DB_PORT=5432
        ```
    *   **Важно**: Замените `ваш_секретный_ключ_для_django` и данные для подключения к БД на свои.

### 4. Выполнение миграций

Выполните миграции, чтобы создать таблицы в базе данных:
```bash
python manage.py migrate
```

### 5. Создание суперпользователя

Создайте учетную запись администратора для доступа к админ-панели:
```bash
python manage.py createsuperuser
```

### 6. Запуск сервера

Запустите локальный сервер Django:
```bash
python manage.py runserver
```
Проект будет доступен по адресу `http://127.0.0.1:8000/`.

---

## Особенности новой системы локаций

### 1. Создание/Редактирование студии (Проблема 1 решена)

*   **Адресный ввод убран**: В форме создания/редактирования студии (`/studios/add/`) больше нет полей для ручного ввода Города, Улицы и Дома.
*   **Интеграция Яндекс Карт**:
    *   Появилось поле поиска на карте.
    *   Поле **"Полный адрес"** заполняется автоматически при выборе точки на карте или через поиск.
    *   Скрытые поля **`latitude`**, **`longitude`**, **`city`** и **`district`** заполняются автоматически с помощью обратного геокодирования Яндекс Карт.
*   **Валидация**: Некорректный адрес невозможно ввести, так как он выбирается из проверенных данных геокодера.

### 2. Обратная навигация (Проблема 2 решена)

*   На странице списка студий (`/studios/`) в каждой карточке появилась кнопка **"Показать на карте"**.
*   При нажатии на кнопку:
    *   Карта плавно прокручивается вверх (если была скрыта).
    *   Карта центрируется на маркере этой студии.
    *   Маркер студии подсвечивается (меняет цвет и появляется значок "★") на 3 секунды.
    *   Карточка студии также подсвечивается на 3 секунды.

### 3. Ключ для Яндекс.Карт (Важно!)

Для корректной работы карты и геокодирования вам необходимо использовать свой API-ключ Яндекс Карт.

1.  Получите бесплатный API-ключ в [Кабинете разработчика Яндекса](https://developer.tech.yandex.ru/).
2.  Откройте в PyCharm файлы:
    *   `photohub_final/templates/studios/studio_list.html`
    *   `photohub_final/templates/studios/studio_form.html`
    *   `studios/geocoding.py`
3.  В каждом из этих файлов замените тестовый ключ `6b266f03-65da-43a8-9ff9-d0232b97e81b` на ваш личный ключ.

**Поздравляю, ваш проект готов к работе!**
